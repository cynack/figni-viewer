<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Figni Viewer Sample</title>
    <meta name="viewport" content="width=device-width" />
    <link
      rel="icon"
      href="https://icongr.am/simple/javascript.svg?size=32&color=3B5EFF&colored=false"
    />
  </head>

  <body>
    <div>
      <h1>テストページ</h1>
      <figni-viewer
        id="viewer"
        item-id="esUI25hX"
        token="ZRZYCb22MFWG7ha4"
        state="neutral"
      >
        <span
          slot="hotspot-test1"
          position="-0.5m 0m 0.5m"
          target="0.1m 0.1m 0m"
          orbit="-45deg 90deg 0.5m"
          >1</span
        >
        <!-- positionがない場合は"0 0 0"を指定した場合と同義、targetがない場合はpositionの値が使用される -->
        <span slot="hotspot-test2" orbit="-45deg 90deg 0.5m">2</span>
        <span
          slot="hotspot-test3"
          position="-0.4m 0m 0.5m"
          clip="storeAnimation"
          to-state="stored"
          visible-state="neutral"
          normal="0m 0m 1m"
          >3</span
        >
        <span
          slot="hotspot-test4"
          position="-0.3m 0m 0.5m"
          clip="storeAnimation"
          reverse
          to-state="neutral"
          visible-state="stored"
          >4</span
        >
        <span
          slot="hotspot-test5"
          position="-0.2m 0m 0.5m"
          orbit="45deg 90deg 0.5m"
        >
          5
          <div slot="panel" place="right bottom">
            <img src="https://admin.figni.io//sample/suitcase/caption_2.png" />
            <h4>タイトル</h4>
            <p>文章</p>
            <button onclick="viewer.playAnimation('openAnimation')">
              開く
            </button>
            <button
              onclick="viewer.playAnimation('openAnimation', { reverse: true, loopCount: 3, onStart: ()=>{console.log('start')}, onEnd: ()=>{console.log('end')} })"
            >
              閉じる
            </button>
          </div>
        </span>
      </figni-viewer>
      <button
        onclick="viewer.addHotspot('test', '0.5 0 0', null, { anime: { clip: 'openAnimation' } })"
      >
        追加
      </button>
      <button
        onclick="viewer.editHotspot('test', '-0.2 0.1 0', '0 0 1', { anime: { clip: 'openAnimation', loopCount: 2, reverse: true } })"
      >
        編集
      </button>
      <button onclick="viewer.removeHotspot('test')">削除</button>
      <button onclick="viewer.toggleVisibleHotspot(i++ % 2)">
        キャプション非表示
      </button>
      <button
        onclick="viewer.setCameraTarget('-1m 1m -0.5m'); viewer.setCameraOrbit('30deg -20deg 0.1m');"
      >
        カメラ位置変更
      </button>
      <button onclick="viewer.resetCameraTargetAndOrbit()">
        カメラ位置初期化
      </button>
      <button onclick="viewer.updateState('stored')">状態変化</button>
      <button onclick="viewer.openTipsPanel('drag')">操作のTipsを開く</button>
      <button onclick="viewer.closeTipsPanel()">Tipsを閉じる</button>
      <button onclick="viewer.openHelpPanel('top')">ヘルプのTOPを開く</button>
      <button onclick="viewer.openHelpPanel('content')">
        コンテンツのヘルプを開く
      </button>
      <button onclick="viewer.openHelpPanel('caption')">
        キャプションのヘルプを開く
      </button>
      <button onclick="viewer.openHelpPanel('ar')">ARのヘルプを開く</button>
      <button onclick="viewer.openHelpPanel('unknown')">
        不明なヘルプを開く
      </button>
      <button onclick="viewer.backHelpPanel()">ヘルプを戻る</button>
      <button onclick="viewer.closeHelpPanel()">ヘルプを閉じる</button>
      <input type="text" id="color" value="#ff0000" />
      <button onclick="colorChange()">色の適用</button>
    </div>
    <script defer>
      let i = 0
      function colorChange() {
        const root = document.documentElement
        const color = document.getElementById('color').value
        root.style.setProperty('--figni-viewer-primary', color)
        viewer.updateColorSettings()
      }
    </script>
    <style>
      #viewer {
        margin-top: 1000px;
      }
      figni-viewer:not(:defined) {
        display: none;
      }
      figni-viewer {
        width: 100%;
        height: 480px;
      }
      :root {
        height: 5000px;
        --figni-viewer-primary: #e7b56a;
        --figni-viewer-secondary: #51a2ff;
        --figni-viewer-background: #faeac9;
        --figni-viewer-prompt-hand: #9deaf0;
        --figni-viewer-error: #ff0080;
      }
    </style>
  </body>
</html>
